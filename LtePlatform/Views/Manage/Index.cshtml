@model LtePlatform.Models.IndexViewModel
@{
    ViewBag.Title = "账号权限管理";
}

<h2>@ViewBag.Title。</h2>
<div class="row" ng-app="myApp" ng-controller="manage.root">
    <div class="col-md-6">
        <p class="text-success">@ViewBag.StatusMessage</p>
        <div panel-info panel-title="panelRoot">
            <dl class="dl-horizontal">
                <dt>密码:</dt>
                <dd>
                    [
                    @if (Model.HasPassword)
                    {
                        @Html.ActionLink("更改密码", "ChangePassword")
                    }
                    else
                    {
                        @Html.ActionLink("创建", "SetPassword")
                    }
                    ]
                </dd>
                <dt>外部登录名:</dt>
                <dd>
                    @Model.Logins.Count [
                    @Html.ActionLink("管理", "ManageLogins") ]
                </dd>
                <dt>电话号码:</dt>
                <dd>
                    @(Model.PhoneNumber ?? "无") [
                    @if (Model.PhoneNumber != null)
                    {
                        @Html.ActionLink("更改", "AddPhoneNumber")
                        @: &nbsp;|&nbsp;
                        @Html.ActionLink("删除", "RemovePhoneNumber")
                    }
                    else
                    {
                        @Html.ActionLink("添加", "AddPhoneNumber")
                    }
                    ]
                </dd>

                <dt>双因素身份验证:</dt>
                <dd>
                    @*<p>
                        没有配置双因素身份验证提供程序。有关设置此 ASP.NET 应用程序
                        以支持双因素身份验证的详细信息，请参阅<a href="http://go.microsoft.com/fwlink/?LinkId=403804">此文</a>。
                    </p>*@
                    @if (Model.TwoFactor)
                    {
                        using (Html.BeginForm("DisableTwoFactorAuthentication", "Manage", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                        {
                            @Html.AntiForgeryToken()
                            <text>已启用
                            <input type="submit" value="禁用" class="btn btn-link" />
                            </text>
                        }
                    }
                    else
                    {
                        using (Html.BeginForm("EnableTwoFactorAuthentication", "Manage", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                        {
                            @Html.AntiForgeryToken()
                            <text>已禁用
                            <input type="submit" value="启用" class="btn btn-link" />
                            </text>
                        }
                    }
                </dd>
            </dl>
        </div>
    </div>
    <div class="col-md-6">
        <div ng-view></div>
    </div>
</div>

@section Scripts
{
    <script src="~/Scripts/angular.js"></script>
    <script src="~/Scripts/angular-route.min.js"></script>
    <script src="~/Scripts/app/common.js"></script>
    <script src="~/Scripts/app/app.datamodel.js"></script>
    <script>
        var app = angular.module('myApp', ['ngRoute']);
    </script>
    <script src="~/Scripts/manage/index.viewmodel.js"></script>
    <script src="~/Scripts/angular-ui/customize/directive.panel.js"></script>
}

